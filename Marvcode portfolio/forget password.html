<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <style>
        body{
            background: rgba(141, 109, 68, 0.79);
        }
        form{
            align-items: center;
            text-align: center;
            margin-top: 300px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.838);
            background: rgb(0, 187, 255);
        }
        #newUsername{
            margin-top: 20px;
            margin-bottom: 20px;
        }
        button{
            margin-top: 20px;
            margin-right: 150px;
        }
    </style>
    <form action="" autocomplete="off">
        <label> Recovery Email:</label>
        <input id="newUsername" type="username" name="username" placeholder="email" required>
        <label>Password:</label>
        <input id="Password" type="password" name="password" placeholder="password" class="form-control" data-toggle="password"  required>
        <button type="reset" onclick="resetAccount()">Reset Account</button>
    </form>
<script>
function resetAccount(){
    var newUsername = document.getElementById('newUsername').value
    var newPassword = document.getElementById('Password').value
    var getRecoveryEmail = localStorage.getItem('recover');
    var getPassword = localStorage.getItem('newPassword');
    

    if(newUsername == "") {
        alert("Username field cannot be empty.");
        return
    }
    else if(newUsername != getRecoveryEmail){
        alert("Wrong Email.");
        return
    }
    else if(newPassword == "") {
        alert("Password field can't be empty");
        return
    }
    else if (newPassword.length < 6) {
        alert("Password must be at least 6 characters.");
        return
    }
    else if (newPassword.length > 20) {
        alert("Password is too long, please try again.");
        return
    }
    else if(!newPassword.match(
    /[!@#$%^&*]/)){
        alert("The password must contain a special character.");
        return
    }
    else if(!newPassword.match(
    /[A-Z]/)){
        alert("The password must contain an Uppercase character.");
        return
    }
    else if(!newPassword.match(
    /[a-z]/)){
        alert("The password must contain an Lowercase character.");
        return
    }
    else if(!newPassword.match(
    /[0-9]/)){
        alert("The password must contain a digit.");
        return
    }
    else if(newPassword == "password"){
        alert("Your password can't be set as password");
        return
    }
    else{
        alert("Reset complete. You now have a new account.");
        // localStorage.setItem('username', newUsername);
        localStorage.setItem('newPassword', newPassword);
        window.location = "login.html"
    }
}
</script>
</body>
</html>